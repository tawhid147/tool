<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image Compressor Tool</title>

<style>
:root {
  --blue: #0d6efd;
  --light-blue: #eaf3ff;
  --white: #ffffff;
}

body {
  font-family: Arial, sans-serif;
  background: var(--light-blue);
  margin: 0;
  padding: 0;
}

.container {
  max-width: 700px;
  margin: 40px auto;
  background: var(--white);
  border-radius: 12px;
  padding: 25px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.08);
}

h1 {
  text-align: center;
  color: var(--blue);
  margin-bottom: 20px;
}

.upload-box {
  border: 2px dashed var(--blue);
  border-radius: 10px;
  padding: 20px;
  text-align: center;
}

.upload-box input {
  display: none;
}

.upload-label {
  cursor: pointer;
  color: var(--blue);
  font-weight: bold;
}

.preview {
  margin-top: 20px;
  text-align: center;
}

.preview img {
  max-width: 100%;
  border-radius: 10px;
}

.controls {
  margin-top: 20px;
}

.controls label {
  font-weight: bold;
  color: var(--blue);
}

.controls input[type="range"] {
  width: 100%;
}

.info {
  margin-top: 10px;
  font-size: 14px;
}

button {
  width: 100%;
  background: var(--blue);
  color: white;
  border: none;
  padding: 12px;
  font-size: 16px;
  border-radius: 8px;
  cursor: pointer;
  margin-top: 15px;
}

button:hover {
  background: #084fc7;
}

@media (max-width: 600px) {
  .container {
    margin: 20px;
    padding: 20px;
  }
}
</style>
</head>

<body>

<div class="container">
  <h1>Image Compressor</h1>

  <div class="upload-box">
    <label class="upload-label">
      Click to Upload Image
      <input type="file" id="upload" accept="image/*">
    </label>
  </div>

  <div class="preview" id="previewBox" style="display:none;">
    <img id="previewImage">
  </div>

  <div class="controls" id="controls" style="display:none;">
    <label>Compression Quality: <span id="qualityValue">70</span>%</label>
    <input type="range" id="quality" min="10" max="100" value="70">

    <div class="info" id="sizeInfo"></div>

    <button id="downloadBtn">Download Compressed Image</button>
  </div>
</div>

<script>
const upload = document.getElementById("upload");
const previewImage = document.getElementById("previewImage");
const previewBox = document.getElementById("previewBox");
const controls = document.getElementById("controls");
const quality = document.getElementById("quality");
const qualityValue = document.getElementById("qualityValue");
const sizeInfo = document.getElementById("sizeInfo");
const downloadBtn = document.getElementById("downloadBtn");

let originalImage = new Image();
let originalSize = 0;
let compressedBlob = null;

upload.addEventListener("change", () => {
  const file = upload.files[0];
  if (!file) return;

  originalSize = (file.size / 1024).toFixed(2);
  const reader = new FileReader();

  reader.onload = () => {
    originalImage.src = reader.result;
    previewImage.src = reader.result;
    previewBox.style.display = "block";
    controls.style.display = "block";
    compressImage();
  };

  reader.readAsDataURL(file);
});

quality.addEventListener("input", () => {
  qualityValue.textContent = quality.value;
  compressImage();
});

function compressImage() {
  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");

  canvas.width = originalImage.width;
  canvas.height = originalImage.height;
  ctx.drawImage(originalImage, 0, 0);

  canvas.toBlob(blob => {
    compressedBlob = blob;
    const compressedSize = (blob.size / 1024).toFixed(2);
    sizeInfo.innerHTML = `
      Original: <b>${originalSize} KB</b><br>
      Compressed: <b>${compressedSize} KB</b>
    `;
  }, "image/jpeg", quality.value / 100);
}

downloadBtn.addEventListener("click", () => {
  const link = document.createElement("a");
  link.href = URL.createObjectURL(compressedBlob);
  link.download = "compressed-image.jpg";
  link.click();
});
</script>

</body>
</html>
